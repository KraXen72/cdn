<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>NewPipe <-> LibreTube Backup Converter</title>

	<!-- External Libraries -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>

	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div class="container">
		<h1>Backup Converter</h1>

		<div class="mode-selector">
			<label class="radio-label">
				<input type="radio" name="mode" value="merge" onchange="updateUI()">
				Mode 1: Merge (Override Subs/Playlists)
			</label>
			<label class="radio-label">
				<input type="radio" name="mode" value="convert" checked onchange="updateUI()">
				Mode 2: Convert (Generate New)
			</label>
		</div>

		<div class="file-area">
			<div class="drop-zone" id="zone-newpipe">
				<h4>NewPipe Backup (.zip)</h4>
				<p><small>Contains newpipe.db</small></p>
				<input type="file" id="file-newpipe" accept=".zip">
			</div>

			<div class="drop-zone" id="zone-libretube">
				<h4>LibreTube Backup (.json)</h4>
				<p><small>JSON export file</small></p>
				<input type="file" id="file-libretube" accept=".json">
			</div>
		</div>

		<div class="controls">
			<button id="btn-to-newpipe" onclick="processBackup('to_newpipe')">
				Target: NewPipe
			</button>
			<button id="btn-to-libretube" onclick="processBackup('to_libretube')">
				Target: LibreTube
			</button>
		</div>

		<h3>Debug Log</h3>
		<div id="debug-console">waiting for input...</div>
	</div>
	<script src="js/main.js" type="module" defer></script>
</body>

</html>